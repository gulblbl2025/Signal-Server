version: 2.1

orbs:
  win: circleci/windows@5.0

parameters:
  executor-type:
    type: enum
    enum: [linux, windows]
    default: linux

jobs:
  build-linux:
    machine: true
    steps:
      - checkout
      - run: echo "Hello, Linux"

  build-windows:
    executor: win/default
    steps:
      - checkout
      - run: Write-Host 'Hello, Windows'

workflows:
  build:
    jobs:
      - build-linux:
          when: << pipeline.parameters.executor-type >> == "linux"
      - build-windows:
          when: << pipeline.parameters.executor-type >> == "windows"
